<!Doctype html>
<html>
<meta charset="utf-8">

<head>
    <style>

    </style>
</head>
<!--<img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
<img src="http://img12.360buyimg.com/N3/jfs/t2302/181/1562193880/220016/88a978ef/56cbbc11Nd6d3b04b.jpg" alt="和田玉">
<img src="http://img13.360buyimg.com/N3/jfs/t2461/336/2166939566/101221/3af27699/56c426a5N9b6673f4.jpg" alt="金吊坠">-->
<style>
    ul {
        margin: 0px;
        padding: 0px;
    }
    
    li {
        margin: 0px;
        padding: 0px;
        list-style: none;
    }
    
    .clearfix:after {
        content: '';
        display: block;
        clear: both;
    }
    
    .headnav {
        width: 200px;
        border: 1px solid black;
    }
    
    .headnav>ul>li {
        float: left;
        margin-left: 10px;
        /*border-right: 1px solid black;*/
        line-height: 24px;
        text-align: center;
        cursor: pointer;
    }
    /*.headnav>ul>li:hover {

    }*/
    
    .container-a,
    .container-b,
    .container-c {
        border: 1px solid black;
    }
    
    .container-a,
    .container-b,
    .container-c {
        width: 436px;
        /*margin-top: 20px;*/
    }
    
    .container-b,
    .container-c {
        display: none;
    }
    /*.container li:hover {
        background: #ccc;
        opacity: .5;
        position: relative;
        z-index: 2;
    }*/
    
    .container img:hover {
        background: #ccc;
        opacity: .5;
        position: relative;
        z-index: -2;
        /*visibility: hidden*/
    }
    
    .container-a>ul>li,
    .container-b>ul>li,
    .container-c>ul>li {
        position: relative;
        border: 1px solid black;
        float: left;
        margin-left: 20px;
        margin-bottom: 10px;
    }
    
    .container-a>ul,
    .container-b>ul,
    .container-c>ul {
        margin-left: -20px;
        margin-bottom: -10px;
    }
    
    .clearfix div {
        /*visibility: hidden ;*/
        /*visibility: visible;*/
        /*display: none;*/
        width: 132px;
        height: 132px;
        position: absolute;
        /*z-index: 2*/
    }
    
    .active {
        /*visibility: visible;*/
        /*visibility: hidden ;*/
        /*display: block;*/
        opacity: .7;
        background: #111;
    }
</style>

<body>
    <div class="headnav">
        <ul class="headnavul clearfix">
            <li>热门</li>
            <li>珠宝首饰</li>
            <li>奢侈品</li>
        </ul>
    </div>
    <div class="container">
        <div class="container-a clearfix">
            <ul class="clearfix">
                <li>
                    <div></div>
                    <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
                </li>
                <li>
                    <div></div>
                    <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
                </li>
                <li>
                    <div></div>
                    <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
                </li>
                <li>
                    <div></div>
                    <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
                </li>
                <li>
                    <div></div>
                    <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
                </li>
                <li>
                    <div></div>
                    <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
                </li>
            </ul>
        </div>
        <div class="container-b clearfix">
            <ul class="clearfix">
                <li>
                    <div></div>
                    <img src="http://img12.360buyimg.com/N3/jfs/t2302/181/1562193880/220016/88a978ef/56cbbc11Nd6d3b04b.jpg" alt="和田玉">
                </li>
                <li>
                    <div></div>
                    <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
                </li>
                <li>
                    <div></div>
                    <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
                </li>
                <li>
                    <div></div>
                    <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
                </li>
                <li>
                    <div></div>
                    <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
                </li>
                <li>
                    <div></div>
                    <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
                </li>
            </ul>
        </div>
        <div class="container-c clearfix">
            <ul class="clearfix">
                <li>
                    <div></div>
                    <img src="http://img13.360buyimg.com/N3/jfs/t2461/336/2166939566/101221/3af27699/56c426a5N9b6673f4.jpg" alt="金吊坠">
                </li>
                <li>
                    <div></div>
                    <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
                </li>
                <li>
                    <div></div>
                    <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
                </li>
                <li>
                    <div></div>
                    <img src="http://img13.360buyimg.com/N3/jfs/t2461/336/2166939566/101221/3af27699/56c426a5N9b6673f4.jpg" alt="金吊坠">
                </li>
                <li>
                    <div></div>
                    <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
                </li>
                <li>
                    <div></div>
                    <img src="http://img10.360buyimg.com/N3/jfs/t1360/330/897475737/123557/23624706/55b05e25N13d4ec5e.jpg" alt="吊坠">
                </li>
            </ul>
        </div>
    </div>
</body>
<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="./jquery-3.2.1.js"></script>
<script>
    var $headnav = $('.headnav')
    var $container = $('.container')
    $headnav.on('click', 'li', function () {
        var text = $(this).text();
        // console.log(text);
        $('.container>div').each(function () {
            // console.log(1);
            $(this).css('display', 'none')
            if (text == '热门') {
                $('.container-a').css('display', 'block')
            } else {
                if (text == '珠宝首饰') {
                    $('.container-b').css('display', 'block')
                } else {
                    if (text == '奢侈品') {
                        $('.container-c').css('display', 'block')
                    }
                }
            }
        })

    })
    // -----------------------------------------写错，写不下去了
    // $container.on('mouseover', 'div', function (e) {
    //     // console.log(this);
    //     // $(this).each(function () {
    //     //     console.log($(this).html());
    //     //     if ($(this).html('button')) {
    //     //         $(this).remove('button');
    //     //     }
    //     // })
    //     var docfrag = document.createDocumentFragment();
    //     var button = document.createElement('button');
    //     var attr = document.createAttribute('style');
    //     var div = $('ul.clearfix').filter(function (index) {
    //         if (index > 0) { return index }
    //     }).eq(0).children('li').children('div')
    //     // var li=div.eq(0).children('li').children('div');
    //     console.log(div);
    //     // console.log(attr);
    //     button.setAttribute('style', 'position: absolute ;z-index: 3;width: 70px;height: 40px;left: 50%;top: 50%;margin-left: -35px;margin-top: -20px;font-size: 8px;')
    //     button.innerText = '立即抢购';
    //     docfrag.appendChild(button);
    //     div.append(docfrag);
    //     // for (var i = 0; i < div.length; i++) {
    //     //     if ($(div[i]).hasClass('active')) {
    //     //         div[i].removeClass('active');
    //     //     }
    //     //     //    $(div[i]).addClass('active');
    //     // }
    //     // div.empty();

    //     // div.parent('ul').each(function () {
    //     //     if (!!div.hasClass('active')) {
    //     //         console.log(this);
    //     //         $('.clearfix div').removeClass('active');
    //     //     }
    //     // })
    //     if (e.target.tagName.toLowerCase() === 'div' && e.target.nodeName.toLocaleLowerCase() != 'container-a') {
    //         $(this).addClass('active');
    //     }

    //     // div.toggleClass('active');
    // })
    // ----------------------------------------------------
    //--------------------------在HTML中设置div作为遮罩的。等等再写一个不在html中使用div作为遮罩的，直接是使用createDocumentFragment来设置。

    $('.clearfix').on('mouseenter', 'div', function (e) {
        if (e.target.tagName.toLowerCase() === 'div') {
            $(e.target).addClass('active');
        }
        var docfrag = document.createDocumentFragment();
        var button = document.createElement('button');
        var attr = document.createAttribute('style');      
        button.setAttribute('style', 'position: absolute ;cursor: pointer;z-index: 3;width: 70px;height: 40px;left: 50%;top: 50%;margin-left: -35px;margin-top: -20px;font-size: 8px;')
        button.innerText = '立即抢购';
        docfrag.appendChild(button);
        $(e.target).append(docfrag);
        // console.log($(e.target))
    })
    // --------------清除遮罩----------------------
    $('.clearfix').on('mouseleave', 'div', function () {
        // console.log($(this)) //因为在on函数中给div绑定事件
        $(this).removeClass();
        $(this).empty();
        // $(this).remove();
        //  不能使用这个，因为remove是删除被选中的元素和子元素，这样使用的话就删除了div，
        // 那么在 $('.clearfix').on('mouseenter', 'div', function (e) {}中在也监听到div了
    })

</script>

</html>